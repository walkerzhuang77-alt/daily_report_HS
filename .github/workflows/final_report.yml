name: 2.0 æ¯æ—¥Aè‚¡å¤ç›˜ (æœ€ç»ˆç‰ˆ)

# è§¦å‘æ¡ä»¶ï¼šæ¯å¤©åŒ—äº¬æ—¶é—´ 17:00 (UTC 09:00) æˆ– æ‰‹åŠ¨
on:
  schedule:
    - cron: '0 9 * * *'
  workflow_dispatch:

jobs:
  run-report:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¥ ä¸‹è½½ä»£ç 
        uses: actions/checkout@v3
      
      - name: ğŸ è®¾ç½® Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'
          
      - name: ğŸ“¦ å®‰è£…ä¾èµ–
        # è¿™é‡Œè‡ªåŠ¨å®‰è£…ä¾èµ–ï¼Œä¸ç”¨ä½ è‡ªå·±ä¼  requirements.txt
        run: pip install akshare pandas google-generativeai python-dotenv
        
      - name: ğŸš€ è¿è¡Œå¤ç›˜
        env:
          GOOGLE_API_KEY: ${{ secrets.GOOGLE_API_KEY }}
          GITHUB_ACTIONS: "true"
        # æ³¨æ„ï¼šè¿™é‡Œæ”¹æˆäº† python daily_report.pyï¼Œå› ä¸ºæˆ‘ä»¬åˆšæ‰æŠŠæ–‡ä»¶ä¼ åˆ°äº†æœ€å¤–é¢
        run: python daily_report.py
