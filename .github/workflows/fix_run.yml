name: Aè‚¡è‡ªåŠ¨ç ”æŠ¥(ç»ˆæç‰ˆ)

on:
  schedule:
    - cron: '30 3 * * *'
    - cron: '0 7 * * *'
  workflow_dispatch:

jobs:
  run_anywhere:
    runs-on: ubuntu-latest
    env:
      TZ: Asia/Shanghai
    steps:
      - name: ä¸‹è½½ä»£ç 
        uses: actions/checkout@v4

      - name: å®‰è£… Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'

      # ğŸ”´ æ ¸å¿ƒä¿®æ”¹ç‚¹ï¼šä¸å†æ‰¾æ–‡ä»¶äº†ï¼Œç›´æ¥åœ¨è¿™é‡Œå¼ºåˆ¶å®‰è£…ï¼
      - name: å¼ºåˆ¶å®‰è£…ä¾èµ–åº“
        run: |
          echo "æ­£åœ¨å®‰è£… AkShare å’Œ Google GenAI..."
          pip install akshare google-genai pandas requests

      - name: æœå¯»å¹¶è¿è¡Œè„šæœ¬
        env:
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
        run: |
          # åªè¦æ‰¾åˆ° daily_report.py å°±è¿è¡Œå®ƒ
          find . -name "daily_report.py" -exec python {} \;

      - name: ä¸Šä¼ ç ”æŠ¥
        uses: actions/upload-artifact@v4
        if: always()
        with:
          name: Daily-Report
          path: "**/*.md"
          retention-days: 5
